1.什么是TCP粘包与拆包

首先TCP是一个"流"协议，犹如河中水一样连成一片，没有严格的分界线。
当我们在发送数据的时候就会出现多发送与少发送问题，也就是TCP粘包与拆包。
得不到我们想要的效果。

所谓粘包：当你把A，B两个数据从甲发送到乙，本想A与B单独发送，但是你却把AB一起发送了，
此时AB粘在一起，就是粘包了

所谓拆包: 如果发送数据的时候，你把A、B拆成了几份发，就是拆包了。当然数据不是你主动拆的，
是TCP流自动拆的

 

2.TCP粘包与拆包产生原因

1.进行了MSS大小的TCP分段
2.以太网帧的plyload大与MTU进行了IP分片
3.应用程序write写入的字节大小大于套接口发送的缓冲区大小

 

3.解决方法

1.消息定长，比如把报文消息固定为500字节，不够用空格补位

2.在包尾增加回车换行符进行分割，例如FTP协议

3.将消息分为消息头和消息体，消息头中包含表示消息总长度的字段

4.更复杂的应用层协议